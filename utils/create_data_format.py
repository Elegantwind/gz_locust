# coding=utf-8
# __author__ = 'Gz'
import json


# 根据数据类型生成校验参数
def data_type_case(data):
    if isinstance(data, str) and 'http' in data:
        data_type = 'HTTP'
    elif isinstance(data, bool):
        data_type = 'Bool'
    elif isinstance(data, str):
        data_type = 'Str'
    elif isinstance(data, int):
        data_type = 'Int'
    else:
        # 处理了None
        data_type = '$$$'
    return data_type


# content数据清洗
# 把接口中的值清理了
# 如果遇到的是一个LIST那么默认其中所有的内容都是一致的只保留一个模板内容
def ergodic_list(data):
    if isinstance(data, list):
        for i in range(len(data)):
            if i == 0:
                if isinstance(data[i], str) or isinstance(data[i], int) or isinstance(data[i], bool) or data[i] == None:
                    data[i] = data_type_case(data[i])
                    print('list中存放的不是dict')
                else:
                    ergodic_list(data[i])
            else:
                data[i] = None
    elif isinstance(data, dict):
        for key in data.keys():
            if isinstance(data[key], str) or isinstance(data[key], int) or isinstance(data[key], bool) or data[
                key] == None:
                data[key] = data_type_case(data[key])
            else:
                ergodic_list(data[key])
    return data


def ergodic_new(data):
    if isinstance(data, list):
        for i in range(len(data)):
            if isinstance(data[i], str) or isinstance(data[i], int) or isinstance(data[i], bool) or data[i] == None:
                data[i] = data_type_case(data[i])
            else:
                ergodic_new(data[i])
    elif isinstance(data, dict):
        for key in data.keys():
            if isinstance(data[key], str) or isinstance(data[key], int) or isinstance(data[key], bool) or data[
                key] == None:
                data[key] = data_type_case(data[key])
            else:
                ergodic_new(data[key])
    return data


# 异常数据处理
# 需要根据具体情况添加主要解决不识别问题
def data_clear(data):
    if isinstance(data, bytes):
        data = data.decode('utf-8')
    data = json.loads(data)
    data = ergodic_list(data)
    return data


if __name__ == "__main__":
    # data内容为response返回内容
    data = ''''{"errorCode":0,"errorMsg":"ok","data":{"data":[{"key":"4","name":"Bling Bling","icon":"http://cdn.kikakeyboard.com/sticker_partnerblingbling/icon_small.png","icon_big":"http://cdn.kikakeyboard.com/sticker_partnerblingbling/icon_big.png","stickers":[{"key":"92b3e6cf009471728fd90b3a577ebd9c","name":"Love","tags":["Love","Loveyou","I Love You","Love You Too","Ultra Happy - Heart Eyes"],"type":1,"image":{"url":"http://cdn.kikakeyboard.com/sticker_partnerblingbling/01.png","width":458,"height":270},"mp4":null,"scale_type":0},{"key":"89180566075ac9ac0b6480654ddfb0e0","name":"Tears Of Joy","tags":["Tears Of Joy","Happy Face"],"type":1,"image":{"url":"http://cdn.kikakeyboard.com/sticker_partnerblingbling/02.png","width":458,"height":270},"mp4":null,"scale_type":0},{"key":"2fc9ac9b3c4e75db5eedcf6bfbe8726","name":"Smile With Money Eye","tags":["Smile With Money Eye"],"type":1,"image":{"url":"http://cdn.kikakeyboard.com/sticker_partnerblingbling/03.png","width":458,"height":270},"mp4":null,"scale_type":0},{"key":"e72ce8b158b994f3f1c14a2c8c570e5a","name":"Rainbow In Mouth","tags":["Rainbow In Mouth"],"type":1,"image":{"url":"http://cdn.kikakeyboard.com/sticker_partnerblingbling/04.png","width":458,"height":270},"mp4":null,"scale_type":0},{"key":"7625d30ee0ddb39adb026bb6a15baae0","name":"Grimacing","tags":["Grimacing","Grimace","Elated"],"type":1,"image":{"url":"http://cdn.kikakeyboard.com/sticker_partnerblingbling/05.png","width":458,"height":270},"mp4":null,"scale_type":0},{"key":"1530385acb98a0d401c15150e89c43e7","name":"Cool","tags":["Cool","Smile With Rainbow Glasses"],"type":1,"image":{"url":"http://cdn.kikakeyboard.com/sticker_partnerblingbling/06.png","width":458,"height":270},"mp4":null,"scale_type":0},{"key":"409ebd53acba15275a22e34c6e3a83e7","name":"Smile Girl","tags":["Smile Girl","Satisfied"],"type":1,"image":{"url":"http://cdn.kikakeyboard.com/sticker_partnerblingbling/07.png","width":458,"height":270},"mp4":null,"scale_type":0},{"key":"1688c2dd61b3b8fd997142c5fb772065","name":"Kiss","tags":["Kiss","Blowing A Kiss"],"type":1,"image":{"url":"http://cdn.kikakeyboard.com/sticker_partnerblingbling/08.png","width":458,"height":270},"mp4":null,"scale_type":0},{"key":"baecf014a724a86fbb62cb47092050f0","name":"Angry","tags":["Angry"],"type":1,"image":{"url":"http://cdn.kikakeyboard.com/sticker_partnerblingbling/09.png","width":458,"height":270},"mp4":null,"scale_type":0},{"key":"8f0133459f1acd294c68a6cb61e9f8b4","name":"Love","tags":["Love","Heart Gesture"],"type":1,"image":{"url":"http://cdn.kikakeyboard.com/sticker_partnerblingbling/10.png","width":458,"height":270},"mp4":null,"scale_type":0},{"key":"36cc6dd4d1a7dcce61fa5cb84389d86b","name":"Agree","tags":["Agree","Very Good","Thumbs Up"],"type":1,"image":{"url":"http://cdn.kikakeyboard.com/sticker_partnerblingbling/11.png","width":458,"height":270},"mp4":null,"scale_type":0},{"key":"f0b96818f1707375656062349bae0b51","name":"Ok","tags":["Ok","Okay","Here Are The Lines For The OK Gesture"],"type":1,"image":{"url":"http://cdn.kikakeyboard.com/sticker_partnerblingbling/12.png","width":458,"height":270},"mp4":null,"scale_type":0},{"key":"504bbf4c965ad9ab4c6c246c9331af8e","name":"Fuck","tags":["Fuck","Middle Finger"],"type":1,"image":{"url":"http://cdn.kikakeyboard.com/sticker_partnerblingbling/13.png","width":458,"height":270},"mp4":null,"scale_type":0},{"key":"e3ad198fba1579377161dae5ef3539a8","name":"Heart","tags":["Heart","Big Red Heart"],"type":1,"image":{"url":"http://cdn.kikakeyboard.com/sticker_partnerblingbling/14.png","width":458,"height":270},"mp4":null,"scale_type":0},{"key":"338542e5012a7c472f76207f735e53dd","name":"Gem Stone","tags":["Gem Stone"],"type":1,"image":{"url":"http://cdn.kikakeyboard.com/sticker_partnerblingbling/15.png","width":458,"height":270},"mp4":null,"scale_type":0},{"key":"8aa0e0f3e6aae558d6543317406d0412","name":"Kiss","tags":["Kiss","Red Lips"],"type":1,"image":{"url":"http://cdn.kikakeyboard.com/sticker_partnerblingbling/16.png","width":458,"height":270},"mp4":null,"scale_type":0}],"author":{"key":"","name":"","avatar":""},"description":"Color of set emoji, surprise your friends."},{"key":"7","name":"BigEmoji","icon":"http://cdn.kikakeyboard.com/gif_partnerbigemoji/icon_small.png","icon_big":"http://cdn.kikakeyboard.com/gif_partnerbigemoji/icon_big.png","stickers":[{"key":"d4454b9d594d601f35ca11f3119dbd3f","name":"Excitied","tags":["Excitied","1F602"],"type":0,"image":{"url":"http://cdn.kikakeyboard.com/gif_partnerbigemoji/01.gif","width":458,"height":270},"mp4":{"url":"http://cdn.kikakeyboard.com/gif_partnerbigemoji/3541308468c9bc7e0f21868f47363a35.mp4","width":228,"height":134},"scale_type":0},{"key":"ab10776fa296bf702e82f99ccd0e651d","name":"Love","tags":["Love","1F60D"],"type":0,"image":{"url":"http://cdn.kikakeyboard.com/gif_partnerbigemoji/02.gif","width":458,"height":270},"mp4":{"url":"http://cdn.kikakeyboard.com/gif_partnerbigemoji/4fe1e6d4125ffadab65efa74e8fb9098.mp4","width":228,"height":134},"scale_type":0},{"key":"a16767f4522c030b72fe0c6870a1b0b","name":"Kiss","tags":["Kiss","1F618"],"type":0,"image":{"url":"http://cdn.kikakeyboard.com/gif_partnerbigemoji/03.gif","width":458,"height":270},"mp4":{"url":"http://cdn.kikakeyboard.com/gif_partnerbigemoji/4e9cab330b26084db3921f7a9a13af74.mp4","width":228,"height":134},"scale_type":0},{"key":"4589a65d4f29cc32c2a55510317ed7af","name":"Cry","tags":["Cry","Sad","1F62D"],"type":0,"image":{"url":"http://cdn.kikakeyboard.com/gif_partnerbigemoji/04.gif","width":458,"height":270},"mp4":{"url":"http://cdn.kikakeyboard.com/gif_partnerbigemoji/10d02fb8c222cf277ea9521a8689da91.mp4","width":228,"height":134},"scale_type":0},{"key":"da3243bb774391cebb6dc49bb45520b7","name":"Unamused","tags":["Unamused","1F612"],"type":0,"image":{"url":"http://cdn.kikakeyboard.com/gif_partnerbigemoji/05.gif","width":458,"height":270},"mp4":{"url":"http://cdn.kikakeyboard.com/gif_partnerbigemoji/a2a25ecddce834c56055c0081555296b.mp4","width":228,"height":134},"scale_type":0},{"key":"b016b11f33c9deef336b8723313ba71a","name":"Smile","tags":["Smile","1F60A"],"type":0,"image":{"url":"http://cdn.kikakeyboard.com/gif_partnerbigemoji/06.gif","width":458,"height":270},"mp4":{"url":"http://cdn.kikakeyboard.com/gif_partnerbigemoji/1bc6509a211efdde5cc9a76a9e15216d.mp4","width":228,"height":134},"scale_type":0},{"key":"7163dcb497b51b7778a960d623b242c8","name":"F*ck","tags":["F*ck","Fuck","Fvck"],"type":0,"image":{"url":"http://cdn.kikakeyboard.com/gif_partnerbigemoji/07.gif","width":458,"height":270},"mp4":{"url":"http://cdn.kikakeyboard.com/gif_partnerbigemoji/b1c830f7674f30947fcb46b9b4ac4fef.mp4","width":228,"height":134},"scale_type":0},{"key":"85447c1a86a8573abaeff4820d536cb9","name":"Grinface","tags":["Grinface","1F601"],"type":0,"image":{"url":"http://cdn.kikakeyboard.com/gif_partnerbigemoji/08.gif","width":458,"height":270},"mp4":{"url":"http://cdn.kikakeyboard.com/gif_partnerbigemoji/51ba864f238b7fd29d92418f519b1f1b.mp4","width":228,"height":134},"scale_type":0},{"key":"d138bf28be77f5b63f54333086c6b3f2","name":"Lol","tags":["Lol","Smile","1F603"],"type":0,"image":{"url":"http://cdn.kikakeyboard.com/gif_partnerbigemoji/09.gif","width":458,"height":270},"mp4":{"url":"http://cdn.kikakeyboard.com/gif_partnerbigemoji/c49f619499811d210cb959e98b5e2531.mp4","width":228,"height":134},"scale_type":0},{"key":"4805fdcf43ec76c8b74ffcf7d57cae88","name":"Wink","tags":["Wink","1F60F"],"type":0,"image":{"url":"http://cdn.kikakeyboard.com/gif_partnerbigemoji/10.gif","width":458,"height":270},"mp4":{"url":"http://cdn.kikakeyboard.com/gif_partnerbigemoji/834c712ef325f7be760db5c672c1fbb8.mp4","width":228,"height":134},"scale_type":0},{"key":"4e83dbac5136542dd9baa2e1a5681fae","name":"Sad","tags":["Sad"],"type":0,"image":{"url":"http://cdn.kikakeyboard.com/gif_partnerbigemoji/11.gif","width":458,"height":270},"mp4":{"url":"http://cdn.kikakeyboard.com/gif_partnerbigemoji/43e2e6237189155b1a59ba531998461f.mp4","width":228,"height":134},"scale_type":0},{"key":"d90a35dc547f6a4cdb5ee3af822b3e6e","name":"Shocked","tags":["Shocked","Omg","1F631"],"type":0,"image":{"url":"http://cdn.kikakeyboard.com/gif_partnerbigemoji/12.gif","width":458,"height":270},"mp4":{"url":"http://cdn.kikakeyboard.com/gif_partnerbigemoji/54b1393f6cab80226cce3e9ed738ec4.mp4","width":228,"height":134},"scale_type":0},{"key":"8ca947547c750356cc58aed97455b0b0","name":"Angry","tags":["Angry","1F621"],"type":0,"image":{"url":"http://cdn.kikakeyboard.com/gif_partnerbigemoji/13.gif","width":458,"height":270},"mp4":{"url":"http://cdn.kikakeyboard.com/gif_partnerbigemoji/f9a2443db1f32ad6897fea7548659882.mp4","width":228,"height":134},"scale_type":0},{"key":"7d3c3c9fd07010f5f156b1a74d1cfd02","name":"Smirk","tags":["Smirk","1F608"],"type":0,"image":{"url":"http://cdn.kikakeyboard.com/gif_partnerbigemoji/14.gif","width":458,"height":270},"mp4":{"url":"http://cdn.kikakeyboard.com/gif_partnerbigemoji/ddc7cc1daa9a9b5824a5a316a731f25e.mp4","width":228,"height":134},"scale_type":0},{"key":"bd7738eb606885ea1ee7f88f8dd5819e","name":"Surprised","tags":["Surprised"],"type":0,"image":{"url":"http://cdn.kikakeyboard.com/gif_partnerbigemoji/15.gif","width":458,"height":270},"mp4":{"url":"http://cdn.kikakeyboard.com/gif_partnerbigemoji/e71393bae9340b656ff002567369e117.mp4","width":228,"height":134},"scale_type":0},{"key":"8517d4ed6e189bb0afb8ada7a604e4f0","name":"Shut Up","tags":["Shut Up"],"type":0,"image":{"url":"http://cdn.kikakeyboard.com/gif_partnerbigemoji/16.gif","width":458,"height":270},"mp4":{"url":"http://cdn.kikakeyboard.com/gif_partnerbigemoji/ebe62ba67296fccaeeb91212d49062bb.mp4","width":228,"height":134},"scale_type":0},{"key":"9b496cf18e1ee2403637943cb975ba77","name":"Love","tags":["Love","2764FE0F"],"type":0,"image":{"url":"http://cdn.kikakeyboard.com/gif_partnerbigemoji/17.gif","width":458,"height":270},"mp4":{"url":"http://cdn.kikakeyboard.com/gif_partnerbigemoji/78bbda823aa324bb824f0045e92ada2a.mp4","width":228,"height":134},"scale_type":0},{"key":"f4daf16f69d27f0964272a0978ec8ba5","name":"I Love You","tags":["I Love You","1F498"],"type":0,"image":{"url":"http://cdn.kikakeyboard.com/gif_partnerbigemoji/18.gif","width":458,"height":270},"mp4":{"url":"http://cdn.kikakeyboard.com/gif_partnerbigemoji/a86d994f6fb0f64c5bb23dff82d8f1fc.mp4","width":228,"height":134},"scale_type":0},{"key":"f5e6be4955fe233c00c7a32782ccbbc7","name":"Kiss","tags":["Kiss","1F444"],"type":0,"image":{"url":"http://cdn.kikakeyboard.com/gif_partnerbigemoji/19.gif","width":458,"height":270},"mp4":{"url":"http://cdn.kikakeyboard.com/gif_partnerbigemoji/9bfddce95a9bf546facf1e056fd5b485.mp4","width":228,"height":134},"scale_type":0},{"key":"4ba28cf0362379b97e44464644188b11","name":"Good","tags":["Good","Great","1F44D"],"type":0,"image":{"url":"http://cdn.kikakeyboard.com/gif_partnerbigemoji/20.gif","width":458,"height":270},"mp4":{"url":"http://cdn.kikakeyboard.com/gif_partnerbigemoji/94a8d9ebe62237cc9cd576ccd2daae0.mp4","width":228,"height":134},"scale_type":0}],"author":{"key":"","name":"","avatar":""},"description":"Animated emojis, make your chat more interesting."},{"key":"37","name":"Hi Emoji","icon":"http://cdn.kikakeyboard.com/sticker_partnerHi_Emoji/icon.png","icon_big":"http://cdn.kikakeyboard.com/sticker_partnerHi_Emoji/icon_big.png","stickers":[{"key":"beb10d7b67ee50e786811f280cfd7151","name":"Smile","tags":["Smile","Happy","Hahaha","1F603"],"type":1,"image":{"url":"http://cdn.kikakeyboard.com/sticker_partnerHi_Emoji/01.png","width":458,"height":270},"mp4":null,"scale_type":0},{"key":"f1cdb72425efc3ce5ce44015a3641be7","name":"Silly","tags":["Silly","1F611"],"type":1,"image":{"url":"http://cdn.kikakeyboard.com/sticker_partnerHi_Emoji/02.png","width":458,"height":270},"mp4":null,"scale_type":0},{"key":"d809a1b125b0cb138436f921ad15e812","name":"Embarrassed","tags":["Embarrassed","1F61F"],"type":1,"image":{"url":"http://cdn.kikakeyboard.com/sticker_partnerHi_Emoji/03.png","width":458,"height":270},"mp4":null,"scale_type":0},{"key":"94efa980ee4261a185cc1e0d661f03ac","name":"Love","tags":["Love","Loveyou","I Love You","Love You Too","1F602"],"type":1,"image":{"url":"http://cdn.kikakeyboard.com/sticker_partnerHi_Emoji/04.png","width":458,"height":270},"mp4":null,"scale_type":0},{"key":"a14c5f009526453679f216670e91aabd","name":"Hot","tags":["Hot","1F616"],"type":1,"image":{"url":"http://cdn.kikakeyboard.com/sticker_partnerHi_Emoji/05.png","width":458,"height":270},"mp4":null,"scale_type":0},{"key":"e3ab909c2882c71a9385a52b0ef111b1","name":"Sunglasses","tags":["Sunglasses","1F601"],"type":1,"image":{"url":"http://cdn.kikakeyboard.com/sticker_partnerHi_Emoji/06.png","width":458,"height":270},"mp4":null,"scale_type":0},{"key":"1f72e559243b41e5e76f920404df8c","name":"Naughty","tags":["Naughty","1F61C"],"type":1,"image":{"url":"http://cdn.kikakeyboard.com/sticker_partnerHi_Emoji/07.png","width":458,"height":270},"mp4":null,"scale_type":0},{"key":"16f59fbb0b97339852f08b905c0049eb","name":"Angry","tags":["Angry","1F624"],"type":1,"image":{"url":"http://cdn.kikakeyboard.com/sticker_partnerHi_Emoji/08.png","width":458,"height":270},"mp4":null,"scale_type":0},{"key":"e271f508a6d97bcb17d133151cc91ff7","name":"Ops","tags":["Ops","1F628"],"type":1,"image":{"url":"http://cdn.kikakeyboard.com/sticker_partnerHi_Emoji/09.png","width":458,"height":270},"mp4":null,"scale_type":0},{"key":"aa22bcd6d7dbe9819d6d5dce36d452ad","name":"Wow","tags":["Wow","1F633"],"type":1,"image":{"url":"http://cdn.kikakeyboard.com/sticker_partnerHi_Emoji/10.png","width":458,"height":270},"mp4":null,"scale_type":0},{"key":"6310497582d4cc0c2d82a0ec15bfcdd8","name":"Joy","tags":["Joy","1F622"],"type":1,"image":{"url":"http://cdn.kikakeyboard.com/sticker_partnerHi_Emoji/11.png","width":458,"height":270},"mp4":null,"scale_type":0},{"key":"69c791125976f4e67cfb9cc31777aaaf","name":"Funny","tags":["1F60A"],"type":1,"image":{"url":"http://cdn.kikakeyboard.com/sticker_partnerHi_Emoji/12.png","width":458,"height":270},"mp4":null,"scale_type":0},{"key":"aa629f87025ec0690b33cbc154bf0570","name":"Sad","tags":["Sad","1F630"],"type":1,"image":{"url":"http://cdn.kikakeyboard.com/sticker_partnerHi_Emoji/13.png","width":458,"height":270},"mp4":null,"scale_type":0},{"key":"583ec8a68fec4092f234dd67632d9045","name":"Shy","tags":["Shy","1F63B"],"type":1,"image":{"url":"http://cdn.kikakeyboard.com/sticker_partnerHi_Emoji/14.png","width":458,"height":270},"mp4":null,"scale_type":0},{"key":"61a484e0146e9598cab898825a69e8e0","name":"Upset","tags":["Upset","1F612"],"type":1,"image":{"url":"http://cdn.kikakeyboard.com/sticker_partnerHi_Emoji/15.png","width":458,"height":270},"mp4":null,"scale_type":0},{"key":"511d6af2e92998f74f06dcb05239a06a","name":"Snicker","tags":["Snicker","263AFE0F"],"type":1,"image":{"url":"http://cdn.kikakeyboard.com/sticker_partnerHi_Emoji/16.png","width":458,"height":270},"mp4":null,"scale_type":0},{"key":"38396bf48ebe9c15de454ff6f458847f","name":"Lol","tags":["Lol","Hahaha","1F606"],"type":1,"image":{"url":"http://cdn.kikakeyboard.com/sticker_partnerHi_Emoji/17.png","width":458,"height":270},"mp4":null,"scale_type":0},{"key":"6e94affebd98a9dbacc9fff84ce7191e","name":"Kiss","tags":["Kiss","Love You","Love","1F618"],"type":1,"image":{"url":"http://cdn.kikakeyboard.com/sticker_partnerHi_Emoji/18.png","width":458,"height":270},"mp4":null,"scale_type":0},{"key":"a5cc3df0b7dfe36193297255ace070a7","name":"Poop","tags":["Poop","1F623"],"type":1,"image":{"url":"http://cdn.kikakeyboard.com/sticker_partnerHi_Emoji/19.png","width":458,"height":270},"mp4":null,"scale_type":0},{"key":"bb6ec63a386004590ee9e7ee0a7fecf6","name":"Tired","tags":["Tired","Sleep","Good Night","1F634"],"type":1,"image":{"url":"http://cdn.kikakeyboard.com/sticker_partnerHi_Emoji/20.png","width":458,"height":270},"mp4":null,"scale_type":0}],"author":{"key":"","name":"","avatar":""},"description":"This project adopted the popular emoji as the design background . According to the age level of customer,some gradient design has been added on the traditional single color.  Therefore, the entire visual results of this emoji are more cute & lively."}],"page":0,"size":3,"next_page":1}}'''
    print(data_clear(data))
